{
    "framework-properties":{
        "org.apache.sling.commons.log.level":"DEBUG",
        "org.apache.sling.commons.log.pattern":"{0,date,dd.MM.yyyy HH:mm:ss.SSS} *{4}* [{2}] {3} {5}"
    },
    "bundles":[
        {
            "id":"org.apache.jackrabbit:oak-segment-tar:${oak.version}",
            "start-order":"15"
        },
        {
            "id":"org.apache.jackrabbit:oak-segment-remote:${oak.version}",
            "start-order":"15"
        },
        {
            "id":"org.apache.jackrabbit:oak-segment-http:${oak.version}",
            "start-order":"16"
        },
        {
            "id":"org.apache.jackrabbit:oak-segment-agentic:${oak.version}",
            "start-order":"17"
        },
        {
            "id":"org.apache.jackrabbit:oak-store-composite:${oak.version}",
            "start-order":"15"
        },
        {
            "id":"org.apache.jackrabbit:oak-auth-web3:${oak.version}",
            "start-order":"15"
        },
        {
            "id":"com.adobe.aem.blockchain:blockchain-aem-content:1.0.0-SNAPSHOT",
            "start-order":"20"
        },
        {
            "id":"com.composum.nodes:composum-nodes-commons:${composum.nodes.version}",
            "start-order":"20"
        },
        {
            "id":"com.composum.nodes:composum-nodes-console:${composum.nodes.version}",
            "start-order":"20"
        },
        {
            "id":"com.composum.nodes:composum-nodes-jslibs:${composum.nodes.version}",
            "start-order":"20"
        },
        {
            "id":"com.composum.nodes:composum-nodes-pckgmgr:${composum.nodes.version}",
            "start-order":"20"
        },
        {
            "id":"com.composum.nodes:composum-nodes-usermgr:${composum.nodes.version}",
            "start-order":"20"
        }
    ],
    "configurations":{
        "org.apache.jackrabbit.oak.segment.SegmentNodeStoreFactory~default":{
            "name":"Default NodeStore",
            "role":"composite-global",
            "repository.home":"launcher/repository",
            "customBlobStore":false
        },
        "org.apache.jackrabbit.oak.segment.http.HttpPersistenceService":{
            "globalStoreUrl":"$[env:OAK_GLOBAL_STORE_URL;default=http://localhost:8090]",
            "lazyMount":true,
            "healthCheckIntervalSeconds":5,
            "connectionTimeoutMs":2000
        },
        "org.apache.jackrabbit.oak.segment.SegmentNodeStoreFactory~oak-chain":{
            "name":"Global Blockchain Store (HTTP)",
            "role":"composite-mount-oak-chain",
            "repository.home":"launcher/http-segment-cache",
            "customBlobStore":false,
            "customSegmentStore":true
        },
        "org.apache.jackrabbit.oak.composite.MountInfoProviderService":{
            "mountedPaths":["/oak-chain"],
            "mountName":"oak-chain",
            "pathsSupportingFragments":["/oak:index/*$"],
            "readOnlyMount":true
        },
        "org.apache.jackrabbit.oak.composite.CompositeNodeStoreService":{
            "seedMount":"oak-chain",
            "enabled":true,
            "enableChecks":false,
            "partialReadOnly":true
        },
       "org.apache.jackrabbit.oak.segment.sync.HttpSegmentStoreSync":{
           "globalStoreUrl":"$[env:OAK_GLOBAL_STORE_URL;default=http://localhost:8090]",
           "syncInterval":60,
           "enabled":true,
           "onlyFinalized":false,
           "scheduler.period":60,
           "scheduler.concurrent":false
       },
        "org.apache.sling.commons.log.LogManager.factory.config~oak-composite":{
            "org.apache.sling.commons.log.level":"INFO",
            "org.apache.sling.commons.log.names":[
                "org.apache.jackrabbit.oak.composite",
                "org.apache.jackrabbit.oak.spi.mount"
            ],
            "org.apache.sling.commons.log.file":"logs/oak-composite.log",
            "org.apache.sling.commons.log.additiv":true
        },
        "org.apache.sling.commons.log.LogManager.factory.config~oak-segment":{
            "org.apache.sling.commons.log.level":"INFO",
            "org.apache.sling.commons.log.names":[
                "org.apache.jackrabbit.oak.segment"
            ],
            "org.apache.sling.commons.log.file":"logs/oak-segment.log",
            "org.apache.sling.commons.log.additiv":true
        },
        "org.apache.sling.commons.log.LogManager.factory.config~oak-http":{
            "org.apache.sling.commons.log.level":"INFO",
            "org.apache.sling.commons.log.names":[
                "org.apache.jackrabbit.oak.segment.http"
            ],
            "org.apache.sling.commons.log.file":"logs/oak-http.log",
            "org.apache.sling.commons.log.additiv":true
        },
        "org.apache.sling.commons.log.LogManager.factory.config~oak-agentic":{
            "org.apache.sling.commons.log.level":"INFO",
            "org.apache.sling.commons.log.names":[
                "org.apache.jackrabbit.oak.segment.agentic"
            ],
            "org.apache.sling.commons.log.file":"logs/oak-agentic.log",
            "org.apache.sling.commons.log.additiv":true
        },
        "com.adobe.aem.blockchain.config.BlockchainConfigService":{
            "mode":"mock",
            "validatorUrl":"http://localhost:8090",
            "requiresMetaMask":false,
            "contractAddress":"0x7fcEc350268F5482D04eb4B229A0679374906732"
        },
        "org.apache.sling.serviceusermapping.impl.ServiceUserMapperImpl.amended~blockchain-aem":{
            "user.mapping":[
                "com.adobe.aem.blockchain.aem-content:blockchain-aem-registration=[blockchain-aem-registration]"
            ]
        },
        "org.apache.sling.engine.impl.auth.SlingAuthenticator":{
            "sling.auth.requirements":[
                "-/starter.html",
                "-/starter.login.html",
                "-/bin/blockchain-aem/biometric-login",
                "-/bin/blockchain-aem/metamask-login",
                "-/bin/blockchain-aem/register-user",
                "-/bin/blockchain-aem/biometric-register",
                "-/bin/blockchain-aem/register-biometric",
                "-/content/blockchain-aem/login.html",
                "-/content/blockchain-aem/register.html",
                "+/content/blockchain-aem",
                "+/bin/blockchain",
                "+/bin/browser.html"
            ]
        }
    },
    "repoinit:TEXT|true": "@file"
}

