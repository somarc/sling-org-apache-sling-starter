<!DOCTYPE html>
<html lang="en">
<!--
  Licensed to the Apache Software Foundation (ASF) under one
  or more contributor license agreements.  See the NOTICE file
  distributed with this work for additional information
  regarding copyright ownership.  The ASF licenses this file
  to you under the Apache License, Version 2.0 (the
  "License"); you may not use this file except in compliance
  with the License.  You may obtain a copy of the License at

   http://www.apache.org/licenses/LICENSE-2.0

  Unless required by applicable law or agreed to in writing,
  software distributed under the License is distributed on an
  "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  KIND, either express or implied.  See the License for the
  specific language governing permissions and limitations
  under the License.
-->
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Blockchain AEM - POC Demo</title>
        <meta name="Description" content="Blockchain AEM Proof of Concept">
        <meta name="theme-color" content="#667eea">
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                min-height: 100vh;
                padding: 40px 20px;
            }

            .container {
                max-width: 1200px;
                margin: 0 auto;
            }

            .header {
                background: rgba(255, 255, 255, 0.98);
                border-radius: 16px;
                padding: 50px;
                margin-bottom: 40px;
                box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
                text-align: center;
            }

            h1 {
                font-size: 3.5rem;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                -webkit-background-clip: text;
                -webkit-text-fill-color: transparent;
                margin-bottom: 15px;
            }

            .tagline {
                font-size: 1.3rem;
                color: #666;
                margin-bottom: 10px;
            }

            .subtitle {
                font-size: 1rem;
                color: #888;
                font-style: italic;
            }

            .card-grid {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
                gap: 30px;
                margin-bottom: 40px;
            }

            .card {
                background: rgba(255, 255, 255, 0.98);
                border-radius: 12px;
                padding: 35px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
                transition: transform 0.3s, box-shadow 0.3s;
                border-left: 5px solid #667eea;
            }

            .card:hover {
                transform: translateY(-5px);
                box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            }

            .card h2 {
                font-size: 1.8rem;
                color: #333;
                margin-bottom: 15px;
                display: flex;
                align-items: center;
                gap: 10px;
            }

            .card-icon {
                font-size: 2rem;
            }

            .card p {
                color: #666;
                line-height: 1.6;
                margin-bottom: 20px;
                font-size: 1.05rem;
            }

            .card-links {
                display: flex;
                flex-direction: column;
                gap: 12px;
            }

            .btn {
                display: inline-block;
                padding: 14px 24px;
                border-radius: 8px;
                text-decoration: none;
                font-weight: 600;
                transition: all 0.3s;
                text-align: center;
                font-size: 1rem;
            }

            .btn-primary {
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
            }

            .btn-primary:hover {
                box-shadow: 0 6px 20px rgba(102, 126, 234, 0.6);
                transform: translateY(-2px);
            }

            .btn-secondary {
                background: linear-gradient(135deg, #f6851b 0%, #e2761b 100%);
                color: white;
                box-shadow: 0 4px 15px rgba(246, 133, 27, 0.4);
            }

            .btn-secondary:hover {
                box-shadow: 0 6px 20px rgba(246, 133, 27, 0.6);
                transform: translateY(-2px);
            }

            .btn-tertiary {
                background: linear-gradient(135deg, #48bb78 0%, #38a169 100%);
                color: white;
                box-shadow: 0 4px 15px rgba(72, 187, 120, 0.4);
            }

            .btn-tertiary:hover {
                box-shadow: 0 6px 20px rgba(72, 187, 120, 0.6);
                transform: translateY(-2px);
            }

            .system-card {
                grid-column: 1 / -1;
                border-left-color: #48bb78;
            }

            .system-links {
                display: grid;
                grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
                gap: 15px;
            }

            .footer {
                background: rgba(255, 255, 255, 0.95);
                border-radius: 12px;
                padding: 30px;
                text-align: center;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
                color: #666;
            }

            .footer a {
                color: #667eea;
                text-decoration: none;
                font-weight: 600;
            }

            .footer a:hover {
                text-decoration: underline;
            }

            .badge {
                display: inline-block;
                padding: 6px 12px;
                border-radius: 20px;
                font-size: 0.85rem;
                font-weight: 600;
                margin-left: 10px;
            }

            .badge-poc {
                background: #fed7d7;
                color: #c53030;
            }

            .badge-new {
                background: #c6f6d5;
                color: #22543d;
            }

            .badge-mode {
                display: inline-block;
                padding: 8px 16px;
                border-radius: 20px;
                font-size: 0.9rem;
                font-weight: 700;
                margin-left: 10px;
                letter-spacing: 0.5px;
                text-transform: uppercase;
            }

            .badge-mock {
                background: #fbbf24;
                color: #78350f;
            }

            .badge-sepolia {
                background: #10b981;
                color: #064e3b;
            }

            .badge-mainnet {
                background: #ef4444;
                color: #7f1d1d;
                animation: pulse 2s ease-in-out infinite;
            }

            @keyframes pulse {
                0%, 100% { opacity: 1; }
                50% { opacity: 0.7; }
            }

            @media (max-width: 768px) {
                h1 {
                    font-size: 2.5rem;
                }
                
                .header {
                    padding: 30px;
                }

                .card-grid {
                    grid-template-columns: 1fr;
                }

                .system-links {
                    grid-template-columns: 1fr;
                }
            }
        </style>
    </head>
    <body>
        <div class="container">
            <div class="header">
                <h1>‚õìÔ∏è Blockchain AEM</h1>
                <p class="tagline">Decentralized Content Repository POC</p>
                <p class="subtitle">Oak + Aeron Consensus + Ethereum Smart Contracts</p>
                <div style="margin-top: 15px;">
                    <span class="badge badge-poc">GARAGE WEEK 2025</span>
                    <span id="mode-badge" class="badge-mode badge-mock">üé≠ Loading...</span>
                </div>
            </div>

            <div class="card-grid">
                <!-- Content Editor (Author) -->
                <div class="card">
                    <h2>
                        <span class="card-icon">‚úçÔ∏è</span>
                        Content Editor
                        <span class="badge badge-new">NEW</span>
                    </h2>
                    <p>
                        Create and publish content to the global oak-chain. Mode-aware interface
                        automatically detects MOCK (no MetaMask), SEPOLIA (testnet), or MAINNET.
                        Choose payment tiers for instant finality.
                    </p>
                    <div class="card-links">
                        <a href="/apps/garage-demo/components/editor/editor.html" class="btn btn-secondary">
                            ‚úçÔ∏è Create Content (Author)
                        </a>
                    </div>
                </div>

                <!-- Content Viewer (Publish) -->
                <div class="card">
                    <h2>
                        <span class="card-icon">üëÅÔ∏è</span>
                        Content Viewer
                    </h2>
                    <p>
                        View published content from the global oak-chain. Beautiful public-facing
                        website design with blockchain verification badges. Perfect for demonstrating
                        decentralized content delivery.
                    </p>
                    <div class="card-links">
                        <a href="/apps/garage-demo/components/viewer/viewer.html" class="btn btn-primary">
                            üëÅÔ∏è View Published Content
                        </a>
                        <a href="/bin/browser.html" class="btn btn-tertiary">
                            üóÇÔ∏è Composum Browser
                        </a>
                    </div>
                </div>

                <!-- Validator Dashboard -->
                <div class="card">
                    <h2>
                        <span class="card-icon">üîß</span>
                        Validator Dashboard
                    </h2>
                    <p>
                        Monitor the global validator network. View consensus state, Aeron cluster 
                        health, proposal queues, and earnings. Real-time metrics from the
                        decentralized content repository.
                    </p>
                    <div class="card-links">
                        <a href="http://localhost:8090/" target="_blank" class="btn btn-primary">
                            üìä Validator Dashboard
                        </a>
                        <a href="http://localhost:8090/api-browser" target="_blank" class="btn btn-tertiary">
                            üß™ API Browser
                        </a>
                    </div>
                </div>

                <!-- System Administration -->
                <div class="card system-card">
                    <h2>
                        <span class="card-icon">‚öôÔ∏è</span>
                        System Administration
                    </h2>
                    <p>
                        Access Sling system tools, OSGi console, JCR browser, and configuration 
                        management. Admin credentials: <code style="background: #f7fafc; padding: 4px 8px; border-radius: 4px;">admin/admin</code>
                    </p>
                    <div class="system-links">
                        <a href="/system/console" class="btn btn-tertiary">
                            üéõÔ∏è OSGi Console
                        </a>
                        <a href="/bin/browser.html" class="btn btn-tertiary">
                            üìÇ JCR Browser
                        </a>
                        <a href="/system/console/configMgr" class="btn btn-tertiary">
                            üîß Configuration
                        </a>
                        <a href="/system/console/bundles" class="btn btn-tertiary">
                            üì¶ Bundles
                        </a>
                    </div>
                </div>
            </div>

            <div class="footer">
                <p>
                    <strong>Blockchain AEM POC</strong> - Built on Apache Sling 14 + Jackrabbit Oak 1.89-SNAPSHOT
                </p>
                <p style="margin-top: 10px;">
                    <a href="https://github.com/apache/jackrabbit-oak" target="_blank">Oak Repository</a> ‚Ä¢ 
                    <a href="https://sling.apache.org" target="_blank">Apache Sling</a> ‚Ä¢ 
                    <a href="/content/blockchain-aem/blockchain.html">POC Documentation</a>
                </p>
                <p style="margin-top: 15px; font-size: 0.9rem; color: #999;">
                    ‚ö° Powered by Aeron Consensus ‚Ä¢ HTTP Segment Transfer ‚Ä¢ Ethereum Smart Contracts
                </p>
            </div>
        </div>

        <script>
        // Fetch blockchain mode from validator API and update badge
        (async function() {
            const modeBadge = document.getElementById('mode-badge');
            const validatorUrl = 'http://localhost:8090';
            
            try {
                const response = await fetch(`${validatorUrl}/v1/blockchain/config`);
                if (!response.ok) {
                    throw new Error(`HTTP ${response.status}`);
                }
                
                const config = await response.json();
                
                // Update badge based on mode
                modeBadge.textContent = config.displayName || config.mode.toUpperCase();
                modeBadge.className = 'badge-mode';
                
                switch(config.mode) {
                    case 'mock':
                        modeBadge.classList.add('badge-mock');
                        break;
                    case 'sepolia':
                        modeBadge.classList.add('badge-sepolia');
                        break;
                    case 'mainnet':
                        modeBadge.classList.add('badge-mainnet');
                        break;
                    default:
                        modeBadge.classList.add('badge-mock');
                }
                
                console.log('üé≠ Blockchain Mode:', config.mode);
                console.log('üì° Full Config:', config);
                
            } catch (error) {
                console.error('Failed to load blockchain config:', error);
                modeBadge.textContent = '‚ö†Ô∏è Validator Offline';
                modeBadge.style.background = '#fbbf24';
                modeBadge.style.color = '#78350f';
            }
        })();
        </script>
    </body>
</html>

